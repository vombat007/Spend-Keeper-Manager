<TransactionScreen>:
    selected_type: 'Expense'
    on_pre_enter: root.load_categories()
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 5
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        BoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            spacing: 10

            Button:
                size_hint: None, None
                size: '45dp', '45dp'
                background_normal: 'kivy_app/assets/img/return_button_normal.png'
                background_down: 'kivy_app/assets/img/return_button_down.png'
                pos_hint: {'center_x': 0.5, 'center_y': 2}
                on_press: root.go_back(self)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            size: 340, 50
            pos_hint: {'center_x': 0.52}
            spacing: 60

            Button:
                id: income_button
                text: 'Income'
                font_name: 'kivy_app/assets/fonts/IrishGrover-Regular.ttf'
                color: 0, 0, 0, 1
                size_hint: None, None
                size: 120, 32
                background_normal: 'kivy_app/assets/img/Rectangle_normal.png'
                background_down: 'kivy_app/assets/img/Rectangle_down.png'
                on_press: root.set_type('Income')

            Button:
                id: expense_button
                text: 'Expense'
                font_name: 'kivy_app/assets/fonts/IrishGrover-Regular.ttf'
                color: 0, 0, 0, 1
                size_hint: None, None
                size: 120, 32
                background_normal: 'kivy_app/assets/img/Rectangle_normal.png'
                background_down: 'kivy_app/assets/img/Rectangle_down.png'
                on_press: root.set_type('Expense')

        BoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            pos_hint: {'center_x': 0.5}
            spacing: 10

            Label:
                text: 'Account:'
                font_name: 'kivy_app/assets/fonts/IrishGrover-Regular.ttf'
                color: 0, 0, 0, 1
                size_hint: None, None
                size: self.texture_size

            Label:
                text: root.account_name  # Bind to account_name property
                font_name: 'kivy_app/assets/fonts/IrishGrover-Regular.ttf'
                color: 0, 0, 0, 1
                size_hint: None, None
                size: self.texture_size

        BoxLayout:
            orientation: 'horizontal'  # Change orientation to horizontal
            size_hint: None, None
            size: 188, 55
            spacing: 10  # Adjust spacing as needed
            pos_hint: {'center_x': 0.5}

            TextInput:
                id: amount_input
                hint_text: "Amount"
                input_filter: 'float'
                background_normal: 'kivy_app/assets/img/Rectangle_Dash.png.'
                background_active: 'kivy_app/assets/img/Rectangle_Dash.png.'
                multiline: False
                size_hint_y: None
                height: 45
                padding_y: [10, 10]
                padding_x: [10, 10]
                font_size: 18

            Button:
                text: 'calc'
                size_hint: None, None
                size: '45dp', '45dp'
                on_press: root.go_calculator(self)


        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: 310, 60
            spacing: 15
            pos_hint: {'center_x': 0.5}

            TextInput:
                id: description_input
                hint_text: "Description"
                multiline: False
                height: 45
                padding_y: [10, 10]
                padding_x: [10, 10]
                font_size: 18

        BoxLayout:
            orientation: 'horizontal'
            size_hint: None, None
            size: '340dp', '50dp'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: '10dp'

            Button:
                id: left_arrow_button
                size_hint: None, None
                size: '45dp', '32dp'
                background_normal: 'kivy_app/assets/img/Button_arrow_left_normal.png'
                background_down: 'kivy_app/assets/img/Button_arrow_left_down.png'
                on_release:
                    root.change_period(-1)
                    root.update_button_visibility()

            Button:
                id: period_label_id
                text: root.selected_date
                font_name: 'kivy_app/assets/fonts/IrishGrover-Regular.ttf'
                background_normal: 'kivy_app/assets/img/Rectangle_normal.png'
                background_down: 'kivy_app/assets/img/Rectangle_normal.png'
                size_hint: None, None
                size: '220dp', '32dp'
                valign: 'middle'
                halign: 'center'
                color: 0, 0, 0, 1
                text_size: self.size

            Button:
                id: right_arrow_button
                background_normal: 'kivy_app/assets/img/Button_arrow_right_normal.png'
                background_down: 'kivy_app/assets/img/Button_arrow_right_down.png'
                background_disabled_normal: ''
                size_hint: None, None
                size: '45dp', '32dp'
                disabled_color: 1, 1, 1, 0  # Fully transparent
                on_release:
                    root.change_period(1)
                    root.update_button_visibility()

        Label:
            text: "Categories"
            font_name: 'kivy_app/assets/fonts/IrishGrover-Regular.ttf'
            color: 0, 0, 0, 1
            size_hint: None, None
            pos_hint: {'center_x': 0.5}
            font_size: 20

        GridLayout:
            id: category_grid
            cols: 4
            size_hint: None, None
            pos_hint: {'center_x': 0.45}
            height: '280dp'
            spacing: 10

        Button:
            text: "Add"
            font_size: 24
            font_name: 'kivy_app/assets/fonts/IrishGrover-Regular.ttf'
            color: 0, 0, 0, 1
            size_hint: None, None
            pos_hint: {'center_x': 0.5}
            size: 120, 32
            on_press: root.create_transaction()
            background_normal: 'kivy_app/assets/img/Rectangle_down.png'
            background_down: 'kivy_app/assets/img/Rectangle_normal.png'
